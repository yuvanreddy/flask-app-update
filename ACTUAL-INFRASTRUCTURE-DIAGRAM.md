# MyApp - Actual Infrastructure Diagram
**Based on Current Deployment**  
**Generated:** October 9, 2025  
**Cluster:** flask-eks (us-east-1)

---

## ğŸŒ Complete Infrastructure Architecture (Actual Deployment)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    INTERNET / END USERS                                      â”‚
â”‚                          http://k8s-flaskdemo-b1a051e724-1178376691                          â”‚
â”‚                                .us-east-1.elb.amazonaws.com                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â”‚ HTTP Port 80
                                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              AWS APPLICATION LOAD BALANCER (ALB)                             â”‚
â”‚                                                                                              â”‚
â”‚  DNS: k8s-flaskdemo-b1a051e724-1178376691.us-east-1.elb.amazonaws.com                       â”‚
â”‚  Scheme: internet-facing                                                                     â”‚
â”‚  Type: application                                                                           â”‚
â”‚  Managed by: AWS Load Balancer Controller                                                    â”‚
â”‚                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  LISTENER                                                                           â”‚     â”‚
â”‚  â”‚  â”œâ”€ Protocol: HTTP                                                                  â”‚     â”‚
â”‚  â”‚  â”œâ”€ Port: 80                                                                        â”‚     â”‚
â”‚  â”‚  â””â”€ Default Action: Forward to Target Group                                        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  TARGET GROUP                                                                       â”‚     â”‚
â”‚  â”‚  â”œâ”€ Target Type: IP (Pod IPs directly)                                             â”‚     â”‚
â”‚  â”‚  â”œâ”€ Protocol: HTTP                                                                  â”‚     â”‚
â”‚  â”‚  â”œâ”€ Port: 5000                                                                      â”‚     â”‚
â”‚  â”‚  â”œâ”€ Health Check:                                                                   â”‚     â”‚
â”‚  â”‚  â”‚  â”œâ”€ Path: /health                                                                â”‚     â”‚
â”‚  â”‚  â”‚  â”œâ”€ Interval: 30 seconds                                                         â”‚     â”‚
â”‚  â”‚  â”‚  â”œâ”€ Timeout: 5 seconds                                                           â”‚     â”‚
â”‚  â”‚  â”‚  â”œâ”€ Healthy Threshold: 2                                                         â”‚     â”‚
â”‚  â”‚  â”‚  â””â”€ Unhealthy Threshold: 3                                                       â”‚     â”‚
â”‚  â”‚  â””â”€ Registered Targets:                                                             â”‚     â”‚
â”‚  â”‚     â””â”€ 10.0.3.100:5000 (healthy) âœ“                                                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â”‚ Routes to Pod IP
                                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  AWS VPC (10.0.0.0/16)                                       â”‚
â”‚                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  PUBLIC SUBNETS (Internet Gateway)                                                  â”‚     â”‚
â”‚  â”‚  â”œâ”€ 10.0.101.0/24 (us-east-1a) - NAT Gateway                                        â”‚     â”‚
â”‚  â”‚  â”œâ”€ 10.0.102.0/24 (us-east-1b) - NAT Gateway                                        â”‚     â”‚
â”‚  â”‚  â””â”€ 10.0.103.0/24 (us-east-1c) - NAT Gateway                                        â”‚     â”‚
â”‚  â”‚                                                                                      â”‚     â”‚
â”‚  â”‚  Purpose: ALB, NAT Gateways, Internet Gateway                                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                           â”‚                                                  â”‚
â”‚                                           â”‚ NAT Gateway                                      â”‚
â”‚                                           â†“                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  PRIVATE SUBNETS (EKS Worker Nodes)                                                 â”‚     â”‚
â”‚  â”‚  â”œâ”€ 10.0.1.0/24 (us-east-1a)                                                        â”‚     â”‚
â”‚  â”‚  â”œâ”€ 10.0.2.0/24 (us-east-1b)                                                        â”‚     â”‚
â”‚  â”‚  â””â”€ 10.0.3.0/24 (us-east-1c)                                                        â”‚     â”‚
â”‚  â”‚                                                                                      â”‚     â”‚
â”‚  â”‚  Purpose: EKS worker nodes, pods (no direct internet access)                        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         EKS CLUSTER: flask-eks                                       â”‚    â”‚
â”‚  â”‚                         Version: 1.28.15-eks-113cf36                                 â”‚    â”‚
â”‚  â”‚                         Endpoint: 1E25F8C93ACAA2E6DE45E360E8888F47.gr7.us-east-1... â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  WORKER NODE 1                                                                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Name: ip-10-0-1-237.ec2.internal                                          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Instance Type: t3.medium                                                  â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Private IP: 10.0.1.237                                                    â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Subnet: 10.0.1.0/24 (us-east-1a)                                          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ OS: Amazon Linux 2                                                        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Kernel: 5.10.244-240.965.amzn2.x86_64                                     â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Container Runtime: containerd 1.7.27                                      â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Status: Ready âœ“                                                           â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Running Pods: (System pods)                                               â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  WORKER NODE 2                                                                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Name: ip-10-0-3-134.ec2.internal                                          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Instance Type: t3.medium                                                  â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Private IP: 10.0.3.134                                                    â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Subnet: 10.0.3.0/24 (us-east-1c)                                          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ OS: Amazon Linux 2                                                        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Kernel: 5.10.244-240.965.amzn2.x86_64                                     â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Container Runtime: containerd 1.7.27                                      â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Status: Ready âœ“                                                           â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Running Pods: flask-app-65fbfd86bb-94pln                                  â”‚   â”‚    â”‚
â”‚  â”‚  â”‚                                                                                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  POD: flask-app-65fbfd86bb-94pln                                        â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Pod IP: 10.0.3.100                                                  â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Namespace: default                                                  â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Status: Running âœ“                                                   â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Restarts: 0                                                         â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Age: 60 minutes                                                     â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                                       â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ CONTAINER: flask                                                    â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ Image: docker.cloudsmith.io/flask-sample-app/                   â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚         photouploadd-app/flask-devops-demo:latest-xxxxxxx        â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ Port: 5000                                                       â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ State: Running                                                   â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ Ready: True âœ“                                                    â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                                                    â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ Health Checks:                                                   â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ Liveness: GET /health (every 30s)                            â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ Readiness: GET /health (every 10s)                           â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                                                    â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ Resource Limits:                                                 â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ CPU: 500m                                                     â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ Memory: 512Mi                                                 â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                                                    â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ Volume Mounts:                                                   â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ /app/static/uploads/photos â†’ flask-app-uploads-pvc           â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ /app/static/thumbnails â†’ flask-app-thumbnails-pvc            â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â””â”€ /app/instance â†’ flask-app-db-pvc                             â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                                       â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ APPLICATION PROCESS:                                                â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ Flask Web Server (Python 3.11)                                   â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ Listening on: 0.0.0.0:5000                                       â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ Process: python app.py                                           â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ User: appuser (non-root)                                         â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚     â””â”€ Working Directory: /app                                          â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  KUBERNETES SERVICE: flask-svc                                                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Type: ClusterIP                                                          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Cluster IP: 172.20.153.248 (internal only)                              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Port: 80 â†’ Target Port: 5000                                            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Selector: app=flask-app                                                 â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Endpoints:                                                               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚     â””â”€ 10.0.3.100:5000 (Pod IP)                                             â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  KUBERNETES INGRESS: flask-alb                                                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ IngressClass: alb                                                         â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Address: k8s-flaskdemo-b1a051e724-1178376691.us-east-1...                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ Rules:                                                                    â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ Path: / â†’ Backend: flask-svc:80                                       â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ Annotations:                                                              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€ scheme: internet-facing                                               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€ target-type: ip                                                       â”‚   â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€ healthcheck-path: /health                                             â”‚   â”‚    â”‚
â”‚  â”‚  â”‚     â””â”€ group.name: flask-demo                                                â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              AWS EBS VOLUMES (Persistent Storage)                            â”‚
â”‚                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  VOLUME 1: flask-app-uploads-pvc                                                    â”‚     â”‚
â”‚  â”‚  â”œâ”€ Volume ID: pvc-6c192853-9252-4cd3-bce1-005d9911a495                            â”‚     â”‚
â”‚  â”‚  â”œâ”€ Type: gp2 (General Purpose SSD)                                                â”‚     â”‚
â”‚  â”‚  â”œâ”€ Size: 10 GiB                                                                   â”‚     â”‚
â”‚  â”‚  â”œâ”€ Status: Bound âœ“                                                                â”‚     â”‚
â”‚  â”‚  â”œâ”€ Access Mode: ReadWriteOnce (RWO)                                               â”‚     â”‚
â”‚  â”‚  â”œâ”€ Mounted To: Pod flask-app-65fbfd86bb-94pln                                     â”‚     â”‚
â”‚  â”‚  â”œâ”€ Mount Path: /app/static/uploads/photos                                         â”‚     â”‚
â”‚  â”‚  â””â”€ Purpose: Store uploaded photo files                                            â”‚     â”‚
â”‚  â”‚     â””â”€ Files: {uuid}_{filename}.jpg, .png, .gif                                    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  VOLUME 2: flask-app-thumbnails-pvc                                                 â”‚     â”‚
â”‚  â”‚  â”œâ”€ Volume ID: pvc-34fd1091-904c-4ad4-b9bb-86abc7064f31                            â”‚     â”‚
â”‚  â”‚  â”œâ”€ Type: gp2 (General Purpose SSD)                                                â”‚     â”‚
â”‚  â”‚  â”œâ”€ Size: 5 GiB                                                                    â”‚     â”‚
â”‚  â”‚  â”œâ”€ Status: Bound âœ“                                                                â”‚     â”‚
â”‚  â”‚  â”œâ”€ Access Mode: ReadWriteOnce (RWO)                                               â”‚     â”‚
â”‚  â”‚  â”œâ”€ Mounted To: Pod flask-app-65fbfd86bb-94pln                                     â”‚     â”‚
â”‚  â”‚  â”œâ”€ Mount Path: /app/static/thumbnails                                             â”‚     â”‚
â”‚  â”‚  â””â”€ Purpose: Store thumbnail images (300x300)                                      â”‚     â”‚
â”‚  â”‚     â””â”€ Files: {photo_id}_thumb.jpg                                                 â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  VOLUME 3: flask-app-db-pvc                                                         â”‚     â”‚
â”‚  â”‚  â”œâ”€ Volume ID: pvc-a45a9cd8-1b6f-467b-81c8-a58a2e098fb4                            â”‚     â”‚
â”‚  â”‚  â”œâ”€ Type: gp2 (General Purpose SSD)                                                â”‚     â”‚
â”‚  â”‚  â”œâ”€ Size: 5 GiB                                                                    â”‚     â”‚
â”‚  â”‚  â”œâ”€ Status: Bound âœ“                                                                â”‚     â”‚
â”‚  â”‚  â”œâ”€ Access Mode: ReadWriteOnce (RWO)                                               â”‚     â”‚
â”‚  â”‚  â”œâ”€ Mounted To: Pod flask-app-65fbfd86bb-94pln                                     â”‚     â”‚
â”‚  â”‚  â”œâ”€ Mount Path: /app/instance                                                      â”‚     â”‚
â”‚  â”‚  â””â”€ Purpose: Store SQLite database                                                 â”‚     â”‚
â”‚  â”‚     â””â”€ File: /app/instance/photos.db                                               â”‚     â”‚
â”‚  â”‚                                                                                     â”‚     â”‚
â”‚  â”‚     DATABASE SCHEMA:                                                               â”‚     â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚     â”‚
â”‚  â”‚     â”‚  Table: photo                                                â”‚                â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ id (VARCHAR(36), PRIMARY KEY) - UUID                    â”‚                â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ filename (VARCHAR(255)) - Unique filename               â”‚                â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ original_filename (VARCHAR(255)) - Original name        â”‚                â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ file_size (INTEGER) - Size in bytes                     â”‚                â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ mime_type (VARCHAR(100)) - image/jpeg, etc.             â”‚                â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ upload_date (DATETIME) - Timestamp                      â”‚                â”‚     â”‚
â”‚  â”‚     â”‚  â””â”€ description (TEXT) - Optional description               â”‚                â”‚     â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Traffic Flow (Request Journey)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: User Request                                                                â”‚
â”‚  User Browser â†’ http://k8s-flaskdemo-b1a051e724-1178376691.us-east-1.elb.amazonaws.comâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: DNS Resolution                                                              â”‚
â”‚  DNS Query â†’ AWS Route 53                                                            â”‚
â”‚  Response â†’ ALB IP Addresses (multiple IPs across AZs)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: ALB Receives Request                                                        â”‚
â”‚  â”œâ”€ ALB: k8s-flaskdemo-b1a051e724-1178376691.us-east-1.elb.amazonaws.com            â”‚
â”‚  â”œâ”€ Listener: HTTP:80                                                                â”‚
â”‚  â”œâ”€ Check: Health of target 10.0.3.100:5000                                          â”‚
â”‚  â””â”€ Status: Healthy âœ“                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: Forward to Pod IP                                                           â”‚
â”‚  ALB â†’ 10.0.3.100:5000 (Pod IP directly, no intermediate hops)                       â”‚
â”‚  Protocol: HTTP                                                                      â”‚
â”‚  Path: / (or /upload, /health, etc.)                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 5: Pod Receives Request                                                        â”‚
â”‚  â”œâ”€ Pod: flask-app-65fbfd86bb-94pln                                                  â”‚
â”‚  â”œâ”€ Container: flask                                                                 â”‚
â”‚  â”œâ”€ Process: Python Flask app.py                                                     â”‚
â”‚  â””â”€ Listening: 0.0.0.0:5000                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 6: Flask Application Processing                                                â”‚
â”‚  â”œâ”€ Route Matching: @app.route('/') or @app.route('/upload')                        â”‚
â”‚  â”œâ”€ Database Query: SQLite at /app/instance/photos.db                               â”‚
â”‚  â”‚  â””â”€ SELECT * FROM photo ORDER BY upload_date DESC                                â”‚
â”‚  â”œâ”€ File Access: /app/static/uploads/photos/{filename}                              â”‚
â”‚  â”‚  â””â”€ Read from EBS volume: flask-app-uploads-pvc                                  â”‚
â”‚  â”œâ”€ Thumbnail Access: /app/static/thumbnails/{photo_id}_thumb.jpg                   â”‚
â”‚  â”‚  â””â”€ Read from EBS volume: flask-app-thumbnails-pvc                               â”‚
â”‚  â””â”€ Render Template: templates/index.html or upload.html                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 7: Response Back to User                                                       â”‚
â”‚  Flask â†’ Pod (10.0.3.100:5000) â†’ ALB â†’ Internet â†’ User Browser                      â”‚
â”‚  â”œâ”€ Status: 200 OK                                                                   â”‚
â”‚  â”œâ”€ Content-Type: text/html or image/jpeg                                            â”‚
â”‚  â””â”€ Body: HTML page or image binary                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Photo Upload Flow (Data Persistence)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. User Uploads Photo via Web Form                                                  â”‚
â”‚     POST /upload                                                                     â”‚
â”‚     Content-Type: multipart/form-data                                                â”‚
â”‚     Body: photo file + description                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ALB Routes to Pod                                                                â”‚
â”‚     ALB â†’ 10.0.3.100:5000                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Flask Processes Upload                                                           â”‚
â”‚     â”œâ”€ Validate file type (jpg, png, gif)                                           â”‚
â”‚     â”œâ”€ Generate UUID: a1b2c3d4-e5f6-7890-abcd-ef1234567890                          â”‚
â”‚     â””â”€ Create unique filename: {uuid}_{original_filename}                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Save Photo to EBS Volume                                                         â”‚
â”‚     â”œâ”€ Write to: /app/static/uploads/photos/{uuid}_{filename}.jpg                   â”‚
â”‚     â”œâ”€ EBS Volume: flask-app-uploads-pvc (10 GiB)                                   â”‚
â”‚     â”œâ”€ Volume ID: pvc-6c192853-9252-4cd3-bce1-005d9911a495                          â”‚
â”‚     â””â”€ File persists even if pod restarts                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Create Thumbnail                                                                 â”‚
â”‚     â”œâ”€ Open image with PIL (Python Imaging Library)                                 â”‚
â”‚     â”œâ”€ Resize to 300x300 (maintain aspect ratio)                                    â”‚
â”‚     â”œâ”€ Convert to JPEG                                                               â”‚
â”‚     â”œâ”€ Save to: /app/static/thumbnails/{photo_id}_thumb.jpg                         â”‚
â”‚     â”œâ”€ EBS Volume: flask-app-thumbnails-pvc (5 GiB)                                 â”‚
â”‚     â””â”€ Volume ID: pvc-34fd1091-904c-4ad4-b9bb-86abc7064f31                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. Save Metadata to Database                                                        â”‚
â”‚     â”œâ”€ Database: SQLite at /app/instance/photos.db                                  â”‚
â”‚     â”œâ”€ EBS Volume: flask-app-db-pvc (5 GiB)                                         â”‚
â”‚     â”œâ”€ Volume ID: pvc-a45a9cd8-1b6f-467b-81c8-a58a2e098fb4                          â”‚
â”‚     â”‚                                                                                â”‚
â”‚     â””â”€ INSERT INTO photo VALUES:                                                    â”‚
â”‚        â”œâ”€ id: a1b2c3d4-e5f6-7890-abcd-ef1234567890                                  â”‚
â”‚        â”œâ”€ filename: a1b2c3d4-e5f6-7890-abcd-ef1234567890_vacation.jpg               â”‚
â”‚        â”œâ”€ original_filename: vacation.jpg                                           â”‚
â”‚        â”œâ”€ file_size: 2457600 (bytes)                                                â”‚
â”‚        â”œâ”€ mime_type: image/jpeg                                                     â”‚
â”‚        â”œâ”€ upload_date: 2025-10-09 09:00:00                                          â”‚
â”‚        â””â”€ description: "My vacation photo"                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. Response to User                                                                 â”‚
â”‚     â”œâ”€ Status: 302 Redirect                                                         â”‚
â”‚     â”œâ”€ Location: /photo/{photo_id}                                                  â”‚
â”‚     â””â”€ User sees uploaded photo with metadata                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DATA PERSISTENCE:
âœ“ Photo File â†’ EBS Volume (survives pod restarts)
âœ“ Thumbnail â†’ EBS Volume (survives pod restarts)
âœ“ Metadata â†’ SQLite on EBS Volume (survives pod restarts)
```

---

## ğŸ” Component Details

### **ALB (Application Load Balancer)**
```
Name: k8s-flaskdemo-b1a051e724
DNS: k8s-flaskdemo-b1a051e724-1178376691.us-east-1.elb.amazonaws.com
Type: application
Scheme: internet-facing
IP Address Type: ipv4
Availability Zones: us-east-1a, us-east-1b, us-east-1c

Listener:
â”œâ”€ Protocol: HTTP
â”œâ”€ Port: 80
â””â”€ Default Action: Forward to Target Group

Target Group:
â”œâ”€ Name: k8s-default-flasksvc-xxxxxxxxxx
â”œâ”€ Target Type: IP
â”œâ”€ Protocol: HTTP
â”œâ”€ Port: 5000
â”œâ”€ Health Check:
â”‚  â”œâ”€ Protocol: HTTP
â”‚  â”œâ”€ Path: /health
â”‚  â”œâ”€ Interval: 30s
â”‚  â”œâ”€ Timeout: 5s
â”‚  â”œâ”€ Healthy Threshold: 2
â”‚  â””â”€ Unhealthy Threshold: 3
â””â”€ Targets:
   â””â”€ 10.0.3.100:5000 (healthy)

Tags:
â”œâ”€ Environment: production
â”œâ”€ Application: flask-photo-gallery
â”œâ”€ elbv2.k8s.aws/cluster: flask-eks
â””â”€ ingress.k8s.aws/stack: flask-demo
```

### **EKS Worker Nodes**
```
Node 1:
â”œâ”€ Name: ip-10-0-1-237.ec2.internal
â”œâ”€ Instance ID: i-xxxxxxxxxxxxxxxxx
â”œâ”€ Instance Type: t3.medium (2 vCPU, 4 GiB RAM)
â”œâ”€ AMI: Amazon EKS Optimized Amazon Linux 2
â”œâ”€ Private IP: 10.0.1.237
â”œâ”€ Subnet: 10.0.1.0/24 (us-east-1a)
â”œâ”€ Security Group: eks-cluster-sg-flask-eks-xxxxxxxxxx
â”œâ”€ IAM Role: flask-eks-node-group-role
â”œâ”€ Status: Ready
â”œâ”€ Kubelet Version: v1.28.15-eks-113cf36
â”œâ”€ Container Runtime: containerd://1.7.27
â””â”€ Capacity:
   â”œâ”€ CPU: 2
   â”œâ”€ Memory: 3.77 GiB
   â””â”€ Pods: 17

Node 2:
â”œâ”€ Name: ip-10-0-3-134.ec2.internal
â”œâ”€ Instance ID: i-xxxxxxxxxxxxxxxxx
â”œâ”€ Instance Type: t3.medium (2 vCPU, 4 GiB RAM)
â”œâ”€ AMI: Amazon EKS Optimized Amazon Linux 2
â”œâ”€ Private IP: 10.0.3.134
â”œâ”€ Subnet: 10.0.3.0/24 (us-east-1c)
â”œâ”€ Security Group: eks-cluster-sg-flask-eks-xxxxxxxxxx
â”œâ”€ IAM Role: flask-eks-node-group-role
â”œâ”€ Status: Ready
â”œâ”€ Kubelet Version: v1.28.15-eks-113cf36
â”œâ”€ Container Runtime: containerd://1.7.27
â”œâ”€ Running Pods:
â”‚  â””â”€ flask-app-65fbfd86bb-94pln
â””â”€ Capacity:
   â”œâ”€ CPU: 2
   â”œâ”€ Memory: 3.77 GiB
   â””â”€ Pods: 17
```

### **Application Pod**
```
Pod: flask-app-65fbfd86bb-94pln
â”œâ”€ Namespace: default
â”œâ”€ Node: ip-10-0-3-134.ec2.internal (10.0.3.134)
â”œâ”€ Pod IP: 10.0.3.100
â”œâ”€ Status: Running
â”œâ”€ QoS Class: Burstable
â”œâ”€ Controlled By: ReplicaSet/flask-app-65fbfd86bb
â”œâ”€ Age: 60 minutes
â”œâ”€ Restarts: 0

Container: flask
â”œâ”€ Image: docker.cloudsmith.io/flask-sample-app/photouploadd-app/flask-devops-demo:latest-xxxxxxx
â”œâ”€ Image Pull Policy: Always
â”œâ”€ Port: 5000/TCP
â”œâ”€ State: Running
â”œâ”€ Ready: True
â”œâ”€ Restart Count: 0

Resources:
â”œâ”€ Limits:
â”‚  â”œâ”€ CPU: 500m
â”‚  â””â”€ Memory: 512Mi
â””â”€ Requests:
   â”œâ”€ CPU: 250m
   â””â”€ Memory: 256Mi

Liveness Probe:
â”œâ”€ Type: HTTP GET
â”œâ”€ Path: /health
â”œâ”€ Port: 5000
â”œâ”€ Initial Delay: 30s
â”œâ”€ Period: 30s
â”œâ”€ Timeout: 3s
â””â”€ Failure Threshold: 3

Readiness Probe:
â”œâ”€ Type: HTTP GET
â”œâ”€ Path: /health
â”œâ”€ Port: 5000
â”œâ”€ Initial Delay: 10s
â”œâ”€ Period: 10s
â”œâ”€ Timeout: 3s
â””â”€ Failure Threshold: 3

Volume Mounts:
â”œâ”€ /app/static/uploads/photos
â”‚  â””â”€ PVC: flask-app-uploads-pvc (10Gi)
â”œâ”€ /app/static/thumbnails
â”‚  â””â”€ PVC: flask-app-thumbnails-pvc (5Gi)
â””â”€ /app/instance
   â””â”€ PVC: flask-app-db-pvc (5Gi)

Environment Variables:
â”œâ”€ PORT: 5000
â”œâ”€ FLASK_ENV: production
â””â”€ DATABASE_URL: sqlite:////app/instance/photos.db
```

### **Persistent Volumes (EBS)**
```
Volume 1: flask-app-uploads-pvc
â”œâ”€ PVC Name: flask-app-uploads-pvc
â”œâ”€ PV Name: pvc-6c192853-9252-4cd3-bce1-005d9911a495
â”œâ”€ Storage Class: gp2
â”œâ”€ Capacity: 10 GiB
â”œâ”€ Access Mode: ReadWriteOnce
â”œâ”€ Status: Bound
â”œâ”€ Reclaim Policy: Delete
â”œâ”€ Volume Mode: Filesystem
â”œâ”€ Mounted To: flask-app-65fbfd86bb-94pln
â”œâ”€ Mount Path: /app/static/uploads/photos
â”œâ”€ AWS EBS Volume ID: vol-xxxxxxxxxxxxxxxxx
â”œâ”€ Volume Type: gp2 (General Purpose SSD)
â”œâ”€ IOPS: 100 (baseline)
â””â”€ Throughput: 128 MiB/s

Volume 2: flask-app-thumbnails-pvc
â”œâ”€ PVC Name: flask-app-thumbnails-pvc
â”œâ”€ PV Name: pvc-34fd1091-904c-4ad4-b9bb-86abc7064f31
â”œâ”€ Storage Class: gp2
â”œâ”€ Capacity: 5 GiB
â”œâ”€ Access Mode: ReadWriteOnce
â”œâ”€ Status: Bound
â”œâ”€ Reclaim Policy: Delete
â”œâ”€ Volume Mode: Filesystem
â”œâ”€ Mounted To: flask-app-65fbfd86bb-94pln
â”œâ”€ Mount Path: /app/static/thumbnails
â”œâ”€ AWS EBS Volume ID: vol-xxxxxxxxxxxxxxxxx
â”œâ”€ Volume Type: gp2 (General Purpose SSD)
â”œâ”€ IOPS: 100 (baseline)
â””â”€ Throughput: 128 MiB/s

Volume 3: flask-app-db-pvc
â”œâ”€ PVC Name: flask-app-db-pvc
â”œâ”€ PV Name: pvc-a45a9cd8-1b6f-467b-81c8-a58a2e098fb4
â”œâ”€ Storage Class: gp2
â”œâ”€ Capacity: 5 GiB
â”œâ”€ Access Mode: ReadWriteOnce
â”œâ”€ Status: Bound
â”œâ”€ Reclaim Policy: Delete
â”œâ”€ Volume Mode: Filesystem
â”œâ”€ Mounted To: flask-app-65fbfd86bb-94pln
â”œâ”€ Mount Path: /app/instance
â”œâ”€ AWS EBS Volume ID: vol-xxxxxxxxxxxxxxxxx
â”œâ”€ Volume Type: gp2 (General Purpose SSD)
â”œâ”€ IOPS: 100 (baseline)
â”œâ”€ Throughput: 128 MiB/s
â””â”€ Contains: SQLite database (photos.db)
```

---

## ğŸ¯ Key Takeaways

### **Current Deployment Status**
âœ… **Cluster**: flask-eks (ACTIVE)  
âœ… **Nodes**: 2 worker nodes (t3.medium) across 2 AZs  
âœ… **Pods**: 1 pod running (flask-app-65fbfd86bb-94pln)  
âœ… **Service**: flask-svc (ClusterIP: 172.20.153.248)  
âœ… **Ingress**: flask-alb with ALB provisioned  
âœ… **Storage**: 3 EBS volumes (10Gi + 5Gi + 5Gi) all bound  
âœ… **ALB**: Public endpoint accessible  

### **Network Architecture**
- **VPC**: 10.0.0.0/16
- **Public Subnets**: 3 subnets across 3 AZs (for ALB)
- **Private Subnets**: 3 subnets across 3 AZs (for worker nodes)
- **Pod Network**: 10.0.x.x (VPC-CNI)
- **Service Network**: 172.20.x.x (ClusterIP range)

### **Data Persistence**
- **Photos**: Stored on 10 GiB EBS volume
- **Thumbnails**: Stored on 5 GiB EBS volume
- **Database**: SQLite on 5 GiB EBS volume
- **Persistence**: All data survives pod restarts/recreations

### **High Availability**
- **Multi-AZ**: Nodes in us-east-1a and us-east-1c
- **ALB**: Distributes traffic across all healthy pods
- **Health Checks**: 4 layers (App, Liveness, Readiness, ALB)
- **Auto-scaling**: Node group can scale from 2 to 4 nodes

---

**Diagram Generated:** October 9, 2025  
**Based on Live Deployment:** flask-eks cluster  
**Region:** us-east-1
